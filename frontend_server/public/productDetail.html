<!DOCTYPE html>
<html>

<head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="shortcut icon" href="images/favicon.png" type="">
    <title>Famms - Fashion HTML Template</title>
    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <!-- font awesome style -->
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="css/responsive.css" rel="stylesheet" />
    <!-- STAR RATING PLUGIN -->
    <link rel="stylesheet" href="css/rates.css">

    <!-- PERSONAL MISC STYLES -->
    <link rel="stylesheet" href="css/styles/misc_styles.css">
</head>

<body class="">
    <!-- header section strats -->
    <header class="header_section navbar sticky-top">
        <nav class="navbar navbar-expand-lg custom_nav-container w-100 mx-5">

            <!-- logo -->
            <a class="navbar-brand" href="index.html"><img height="80" src="images/logo.png" alt="#" /></a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class=""> </span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                    </li>

                    <!-- login -->
                    <li class="nav-item">
                        <a class="nav-link" href="login.html" id='loginLink'>
                            <i class="fa fa-sign-in fa-lg" aria-hidden="true"></i>
                            Login
                        </a>
                    </li>
                    <!-- /login -->

                    <!-- profile -->
                    <li class="nav-item">
                        <a class="nav-link d-none" href="#" id="profileLink">
                            <i class="fa fa-user fa-lg" aria-hidden="true"></i>
                            Profile
                        </a>
                    </li>
                    <!-- /profile -->

                    <!-- logout -->
                    <li class="nav-item">
                        <a class="nav-link d-none" onclick="logout()" id='logoutLink'>
                            <i class="fa fa-sign-out fa-lg" aria-hidden="true"></i>
                            Logout
                        </a>
                    </li>
                    <!-- /logout -->

                    <!-- cart -->
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <!-- cart icon -->
                            <i class="fa fa-shopping-cart fa-lg" aria-hidden="true"></i>
                            <!-- /cart icon -->
                            Cart
                        </a>
                    </li>
                    <!-- /cart -->

                    <!-- search -->
                    <li class="nav-item">
                        <input type="text d-inline my-2 my-sm-0" id='nameSearchBox' placeholder='Search name'>
                        <input type="text d-inline my-2 my-sm-0" id='brandSearchBox' placeholder='Search brand'>

                        <button class="btn  my-2 my-sm-0 nav_search-btn d-inline" type="button"
                            onclick="headerSearch()">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>
                    </li>
                    <!-- /search -->
                </ul>

                <!-- 
  <div id="welcome">
     Welcome
  </div> -->
            </div>

        </nav>
    </header>
    <!-- end header section -->

    <!-- main product body   -->
    <div class="container" id='main_product_body'>
        <div class="row mb-5" id='productDetails'>
        </div>

        <!-- review -->
        <div class="row text-left mt-5">
            <h1 class="mx-1 font-weight-bold">Reviews</h1>

            <hr class="col-12">

            <div class="col-12 row mb-5" id='reviewsContainer'>

            </div>

            <!-- leave review -->
            <div class="col-6 offset-3 mb-5 d-none" id='reviewForm'>
                <h4 class="font-weight-bold">Leave a Review</h4>

            </div>
            <!-- /leave review -->
        </div>
        <!-- /review -->
    </div>
    <!-- /main product body -->

    <!-- footer section -->
    <footer class="footer_section">
        <div class="container">
            <div class="row">
                <div class="col-md-4 footer-col">
                    <div class="footer_contact">
                        <h4>
                            Reach at..
                        </h4>
                        <div class="contact_link_box">
                            <a href="">
                                <i class="fa fa-map-marker" aria-hidden="true"></i>
                                <span>
                                    Location
                                </span>
                            </a>
                            <a href="">
                                <i class="fa fa-phone" aria-hidden="true"></i>
                                <span>
                                    Call +01 1234567890
                                </span>
                            </a>
                            <a href="">
                                <i class="fa fa-envelope" aria-hidden="true"></i>
                                <span>
                                    demo@gmail.com
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 footer-col">
                    <div class="footer_detail">
                        <a href="index.html" class="footer-logo">
                            Famms
                        </a>
                        <p>
                            Necessary, making this the first true generator on the Internet. It uses a dictionary of
                            over 200
                            Latin words, combined with
                        </p>
                        <div class="footer_social">
                            <a href="">
                                <i class="fa fa-facebook" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-twitter" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-linkedin" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-instagram" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-pinterest" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-info">
                <div class="col-lg-7 mx-auto px-0">
                    <p>
                        &copy; <span id="displayYear"></span> All Rights Reserved By
                        <a href="https://html.design/">Free Html Templates</a><br>

                        Distributed By <a href="https://themewagon.com/" target="_blank">ThemeWagon</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer section -->

    <!-- jQery -->
    <script src="js/jquery-3.4.1.min.js"></script>
    <!-- popper js -->
    <script src="js/popper.min.js"></script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.js"></script>
    <!-- custom js -->
    <script src="js/custom.js"></script>

    <script src="js/code/auth.js"></script>

    <script src="js/code/header.js"></script>

    <!-- loads star rating system -->
    <script src="./js/jquery-rates.js"></script>


    <script src='./js/code/productDetail.js'></script>
    <script>
        $(document).ready(function () {
            // get url query
            let params = (new URL(document.location)).searchParams;
            const productid = parseInt(params.get('product'));

            // console.log(productid);

            if (isNaN(productid)) {
                window.location.assign('index.html');
            }
            else {
                getProductIdDetails(productid)
                    .then(function () {
                        getProductIdAvgRating(productid)
                    }).catch(function (error) {
                        window.location.assign('index.html');
                        console.log('error');
                    });

                getProductIdReviews(productid);

                // src auth.js
                isLoggedIn()
                    .then(function (response) {
                        console.log(response);
                        //src header.js
                        addSignOutAndProfileLinks();

                        //src productDetail.js
                        // create form html
                        return addReviewForm();
                    }).then(function () {
                        // then attach submit function
                        $('#reviewSubmit').click(function () {
                            postProductIdReview(productid);
                        });

                        // src jquer-rates.js (plugin from jqueryscript.net by keshiki808)
                        // then create star form 
                        $('#stars').rates({
                            shape: 'black-star',
                            shapeCount: '5',
                            shadeColor: 'rates-blue',
                        });
                    }).catch(function (error) {
                        console.log(error);
                    });

                return false;
            }
        });
    </script>
</body>

</html>