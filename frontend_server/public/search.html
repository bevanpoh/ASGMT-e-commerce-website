<!DOCTYPE html>
<html>

<head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="shortcut icon" href="images/favicon.png" type="">
    <title>Famms - Fashion HTML Template</title>
    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <!-- font awesome style -->
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="css/responsive.css" rel="stylesheet" />

    <!-- CUSTOM MISC STYLES -->
    <link rel="stylesheet" href="css/styles/misc_styles.css">
</head>

<body>
    <!-- header section strats -->
    <header class="header_section navbar sticky-top">
        <nav class="navbar navbar-expand-lg custom_nav-container w-100 mx-5">

            <!-- logo -->
            <a class="navbar-brand" href="index.html"><img height="80" src="images/logo.png" alt="#" /></a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class=""> </span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>

                    <!-- login -->
                    <li class="nav-item">
                        <a class="nav-link" href="login.html" id='loginLink'>
                            <i class="fa fa-sign-in fa-lg" aria-hidden="true"></i>
                            Login
                        </a>
                    </li>
                    <!-- /login -->

                    <!-- profile -->
                    <li class="nav-item">
                        <a class="nav-link d-none" href="#" id="profileLink">
                            <i class="fa fa-user fa-lg" aria-hidden="true"></i>
                            Profile
                        </a>
                    </li>
                    <!-- /profile -->

                    <!-- logout -->
                    <li class="nav-item">
                        <a class="nav-link d-none" onclick="logout()" id='logoutLink'>
                            <i class="fa fa-sign-out fa-lg" aria-hidden="true"></i>
                            Logout <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <!-- /logout -->

                    <!-- cart -->
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <!-- cart icon -->
                            <i class="fa fa-shopping-cart fa-lg" aria-hidden="true"></i>
                            <!-- /cart icon -->
                            Cart
                        </a>
                    </li>
                    <!-- /cart -->

                    <!-- search -->
                    <li class="nav-item active">
                        <input type="text d-inline my-2 my-sm-0" id='nameSearchBox' placeholder='Search name'>
                        <input type="text d-inline my-2 my-sm-0" id='brandSearchBox' placeholder='Search brand'>

                        <button class="btn  my-2 my-sm-0 nav_search-btn d-inline" type="button"
                            onclick="headerSearch()">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>
                    </li>
                    <!-- /search -->
                </ul>

                <!-- 
<div id="welcome">
 Welcome
</div> -->
            </div>

        </nav>
    </header>
    <!-- end header section -->

    <!-- main body -->
    <div class="container">
        <div class="row">
            <!-- BEGIN SEARCH RESULT -->
            <div class="col-md-12">
                <div class="grid search">
                    <div class="grid-body">
                        <div class="row">
                            <!-- BEGIN RESULT -->
                            <div class="col-md-12">
                                <h2><i class="fa fa-file-o"></i>Search Result</h2>
                                <hr>
                                <!-- BEGIN SEARCH INPUT -->
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Product Name" value=""
                                        id='nameInput'>
                                    <input type="text" class="form-control" placeholder="Brand Name" value=""
                                        id='brandInput'>
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary" type="button"><i class="fa fa-search"
                                                id="searchButton"></i></button>
                                    </span>
                                </div>
                                <!-- END SEARCH INPUT -->
                                <p>Showing all results matching <span id="queryKeywords"></span></p>

                                <div class="padding"></div>

                                <!-- BEGIN SEARCH RESULT -->
                                <div class="container row" id="searchResultsContainer">

                                </div>
                                <!-- END SEARCH RESULT -->
                            </div>
                            <!-- END RESULT -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- END SEARCH RESULT -->
        </div>
    </div>
    <!-- /main body -->

    <!-- footer section -->
    <footer class="footer_section">
        <div class="container">
            <div class="row">
                <div class="col-md-4 footer-col">
                    <div class="footer_contact">
                        <h4>
                            Reach at..
                        </h4>
                        <div class="contact_link_box">
                            <a href="">
                                <i class="fa fa-map-marker" aria-hidden="true"></i>
                                <span>
                                    Location
                                </span>
                            </a>
                            <a href="">
                                <i class="fa fa-phone" aria-hidden="true"></i>
                                <span>
                                    Call +01 1234567890
                                </span>
                            </a>
                            <a href="">
                                <i class="fa fa-envelope" aria-hidden="true"></i>
                                <span>
                                    demo@gmail.com
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 footer-col">
                    <div class="footer_detail">
                        <a href="index.html" class="footer-logo">
                            Famms
                        </a>
                        <p>
                            Necessary, making this the first true generator on the Internet. It uses a dictionary of
                            over 200
                            Latin words, combined with
                        </p>
                        <div class="footer_social">
                            <a href="">
                                <i class="fa fa-facebook" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-twitter" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-linkedin" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-instagram" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-pinterest" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 footer-col">
                    <div class="map_container">
                        <div class="map">
                            <div id="googleMap"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-info">
                <div class="col-lg-7 mx-auto px-0">
                    <p>
                        &copy; <span id="displayYear"></span> All Rights Reserved By
                        <a href="https://html.design/">Free Html Templates</a><br>

                        Distributed By <a href="https://themewagon.com/" target="_blank">ThemeWagon</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer section -->

    <!-- jQery -->
    <script src="js/jquery-3.4.1.min.js"></script>
    <!-- popper js -->
    <script src="js/popper.min.js"></script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.js"></script>
    <!-- custom js -->
    <script src="js/custom.js"></script>


    <script src="js/code/auth.js"></script>
    <script src="js/code/header.js"></script>

    <script src="js/code/search.js"></script>

    <script>
        $(document).ready(function () {
            // get keyword from query
            let params = (new URL(document.location)).searchParams;
            const nameKeyword = params.get('name');
            const brandKeyword = params.get('brand');

            $('input#nameInput').attr('value', nameKeyword);
            $('input#brandInput').attr('value', brandKeyword);

            const query = window.location.href.split('?')[1];
            if (!query) window.location.assign('index.html')
            getSearchResults(query);

            var displayKeyword = ''
            if (nameKeyword) displayKeyword += `name = "${nameKeyword}"`;
            if (brandKeyword) {
                if (displayKeyword) displayKeyword += ' and '
                displayKeyword += `brand = "${brandKeyword}"`
            }
            $('span#queryKeywords').text(displayKeyword)

            $('#searchButton').click(function () {
                var inputQuery = '';
                const nameInput = $('input#nameInput').val();
                const brandInput = $('input#brandInput').val();

                if (nameInput) inputQuery += `name=${nameInput}`;
                if (brandInput) {
                    if (inputQuery) inputQuery += '&'
                    inputQuery += `brand=${brandInput}`
                }
                window.location.assign(`${window.location.href.split('?')[0]}?${inputQuery}`)
            })


            // src auth.js
            isLoggedIn().then(function (response) {
                console.log(response);
                //src header.js
                addSignOutAndProfileLinks();

            }).catch(function (error) {
                console.log(error);
            });
        });
    </script>
</body>

</html>